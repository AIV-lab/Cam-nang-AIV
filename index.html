<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hệ Thống Giao Tiếp Toàn Diện</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* CSS Styles for the entire communication hub application */
        body { font-family: 'Times New Roman', Times, serif; background-color: #fae2ca; color: #0f172a; }
        .gemini-button {
            background-color: #1e40af; color: white; font-weight: 600; padding: 0.6rem 1.25rem; border-radius: 0.5rem; transition: all 0.3s ease; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem;
        }
        .gemini-button:hover { background-color: #1c348a; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1); transform: translateY(-2px); }
        .gemini-button:disabled { background-color: #94a3b8; cursor: not-allowed; opacity: 0.7; }
        
        .feature-card {
            background-color: #ffffff; border: 1px solid #e2e8f0; border-radius: 0.75rem; box-shadow: 0 1px 3px 0 rgba(0,0,0,0.07), 0 1px 2px 0 rgba(0,0,0,0.05); transition: all 0.3s ease;
        }
        .feature-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); }
        .loader { border: 4px solid #f3f3f3; border-radius: 50%; border-top: 4px solid #3b82f6; width: 24px; height: 24px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .result-box { min-height: 150px; background-color: #ffffff; border: 1px solid #e2e8f0; border-radius: 0.5rem; padding: 1rem; }
        .section-title {
            font-size: 2.25rem; /* 36px */
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 0.5rem;
        }
        .section-subtitle {
            font-size: 1.125rem; /* 18px */
            color: #334155;
            max-width: 60ch;
            margin-left: auto;
            margin-right: auto;
        }
        .table-wrapper { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #94a3b8; padding: 0.75rem; text-align: left; }
        th { background-color: #f1f5f9; font-weight: 600; }
        tbody tr { transition: background-color 0.2s ease-in-out; }
        tbody tr:hover { background-color: #f8fafc; }
        
        /* Language Switcher Styles */
        .lang-switcher button { padding: 0.25rem 0.75rem; border-radius: 0.375rem; font-weight: 600; transition: all 0.2s ease-in-out; border: 2px solid transparent; }
        .lang-switcher button.active { background-color: #1e40af; color: white; }
        .lang-switcher button:not(.active) { background-color: #e2e8f0; color: #475569; }
        .lang-switcher button:not(.active):hover { background-color: #cbd5e1; }
        
        /* Tab Styles */
        .tab-button {
            padding: 0.6rem 1.25rem;
            margin: 0 0.25rem 0.5rem 0.25rem;
            font-weight: 700;
            border-radius: 0.5rem;
            transition: all 0.3s;
            background-color: #86efac; /* light green */
            color: #1e293b; /* dark text */
            border: 2px solid transparent;
        }
        .tab-button:hover {
             background-color: #4ade80;
        }
        .tab-button.active {
            background-color: #16a34a; /* darker green */
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        .tab-pane { display: none; }
        .tab-pane.active { display: block; }
        
        /* Sticky Header */
        .sticky-header { position: sticky; top: 0; z-index: 20; background-color: #fae2ca; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        
        /* Content Section Animation */
         .content-section {
            background-color: #ffffff; padding: 2rem; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
            opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .content-section.is-visible { opacity: 1; transform: translateY(0); }
        .content-section h3 { font-size: 1.875rem; font-weight: 700; color: #1e293b; margin-bottom: 1.5rem; }
        .content-section h4 { font-size: 1.25rem; font-weight: 600; color: #334155; margin-top: 1.5rem; margin-bottom: 0.75rem; }
        .content-section p, .content-section ul, .content-section li { 
            color: #374151; 
            line-height: 1.8;
            font-size: 1.125rem; /* Increased font size for readability */
        }
        .content-section ul { list-style-position: inside; padding-left: 0.5rem; }
        
        /* Back to top button */
        #back-to-top {
            position: fixed; bottom: 20px; right: 20px; background-color: #1e40af; color: white; width: 48px; height: 48px; border-radius: 50%; display: none; justify-content: center; align-items: center; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.15); transition: opacity 0.3s, transform 0.3s; z-index: 30;
        }
        #back-to-top:hover { transform: scale(1.1); }
        #back-to-top.show { display: flex; }
        
        /* Speaker Button Styles */
        .speaker-button {
            position: absolute; top: 0.5rem; right: 0.5rem; z-index: 10;
            background-color: #e2e8f0; color: #475569;
            width: 40px; height: 40px;
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; transition: all 0.2s ease-in-out;
        }
        .speaker-button:hover { background-color: #cbd5e1; transform: scale(1.1); }
        .speaker-button.speaking { background-color: #ef4444; color: white; }
        
        /* Main Title Styles */
        .main-title-container {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1rem 2rem;
            text-align: center;
            margin: 1rem 0;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
        }
        .main-title {
            font-size: 2.5rem;
            font-weight: 800;
            text-transform: uppercase;
            color: #15803d; /* green-700 */
        }
        
        /* Tab Main Title */
        .tab-main-title {
            font-size: 2.5rem; /* Increased size */
            font-weight: 800; /* Bolder */
            text-transform: uppercase;
            color: #1d4ed8; /* blue-700 */
            text-align: center;
            margin-bottom: 2rem;
        }
        
        /* Calendar Styles */
        #calendar-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        @media (min-width: 768px) { /* md breakpoint */
            #calendar-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .month-card {
            background-color: #fff;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            padding: 1rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        .month-header {
            text-align: center;
            font-size: 1.25rem;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 1rem;
        }
        .days-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
        }
        .day-name, .day-cell {
            text-align: center;
            font-size: 0.875rem;
            padding: 0.25rem;
        }
        .day-name { font-weight: 600; color: #475569; }
        .day-cell {
            height: 48px;
            border: 1px solid #e5e7eb; /* Added border for each day */
            border-radius: 0.375rem;
            cursor: pointer;
            transition: background-color 0.2s;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .day-cell:not(.empty):hover { background-color: #eff6ff; }
        .day-cell.weekend { background-color: #fee2e2; } /* Light red for weekends */
        .day-cell.today { 
            background-color: #dbeafe; /* Light blue for today */
            color: #1e3a8a; 
            font-weight: bold;
            border: 2px solid #60a5fa;
        }
        .day-cell.has-note::after {
            content: '';
            position: absolute;
            top: 2px;
            right: 2px;
            width: 14px; /* Increased size */
            height: 14px; /* Increased size */
            border-radius: 50%;
            background-color: #d97706; /* Darker Orange: amber-600 */
            border: 2px solid white;
        }
        .day-cell.empty {
            pointer-events: none;
            background-color: #f9fafb;
        }

        /* Note Modal Styles */
        #note-modal {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        #note-modal.show { display: flex; }
        .modal-content {
            background-color: #fff;
            padding: 2rem;
            border-radius: 0.75rem;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="text-slate-900">

    <main class="container mx-auto">
        <!-- Sticky Header Container -->
        <div class="sticky-header px-4 md:px-8">
            <!-- Top Bar with Logo and Language Switcher -->
            <div class="flex justify-between items-center py-4">
                <img src="https://lh3.googleusercontent.com/d/1SWWCXuoDNBgh-jblxmTi049DgSCBzIQB" alt="Logo Công Ty" class="h-12 w-auto" onerror="this.onerror=null;this.src='https://placehold.co/120x48/fae2ca/334155?text=Logo'">
                <div class="lang-switcher flex space-x-2">
                    <button id="lang-vi" onclick="switchLanguage('vi')">VI</button>
                    <button id="lang-jp" onclick="switchLanguage('jp')">JP</button>
                </div>
            </div>

            <!-- Main Title -->
            <div class="main-title-container">
                <h1 class="main-title" data-lang-vi="CẨM NANG GIAO TIẾP TOÀN DIỆN" data-lang-jp="包括的コミュニケーションハンドブック"></h1>
            </div>

            <!-- Tab Navigation -->
            <div class="border-b border-slate-300">
                <nav class="flex flex-wrap -mb-px">
                    <button id="tab-btn-explanation" onclick="switchTab('explanation')" class="tab-button active" data-lang-vi="Giải Thích Khái Niệm" data-lang-jp="概念説明"></button>
                    <button id="tab-btn-comparison" onclick="switchTab('comparison')" class="tab-button" data-lang-vi="So Sánh &amp; Cộng Hưởng" data-lang-jp="比較と相乗効果"></button>
                    <button id="tab-btn-build" onclick="switchTab('build')" class="tab-button" data-lang-vi="Xây Dựng &amp; Duy Trì" data-lang-jp="構築と維持"></button>
                    <button id="tab-btn-feedback" onclick="switchTab('feedback')" class="tab-button" data-lang-vi="Ý Kiến Đóng Góp" data-lang-jp="ご意見"></button>
                    <button id="tab-btn-calendar" onclick="switchTab('calendar')" class="tab-button" data-lang-vi="Lịch" data-lang-jp="カレンダー"></button>
                </nav>
            </div>
        </div>

        <div class="p-4 md:p-8">
            <!-- Tab Content: Explanation -->
            <div id="tab-content-explanation" class="tab-pane active pt-8 space-y-8 relative">
                <h2 class="tab-main-title" data-lang-vi="GIẢI THÍCH CÁC KHÁI NIỆM" data-lang-jp="概念の説明"></h2>
                <button onclick="toggleSpeech('tab-content-explanation')" class="speaker-button" data-tab-id="tab-content-explanation" aria-label="Đọc nội dung">
                    <svg class="w-6 h-6 speaker-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"></path></svg>
                    <svg class="w-6 h-6 stop-icon hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M9 9.563C9 9.253 9.253 9 9.563 9h4.874c.31 0 .563.253.563.563v4.874c0 .31-.253.563-.563.563H9.563C9.253 15 9 14.747 9 14.437V9.563z"></path></svg>
                </button>
                
                <div class="content-section grid grid-cols-1 md:grid-cols-3 gap-8 items-center">
                    <div class="md:col-span-2">
                        <h3 class="text-2xl font-bold text-orange-700" data-lang-vi="1. Hou-Ren-Sou (報連相): Nền tảng của dòng chảy thông tin" data-lang-jp="1. 報連相（ほうれんそう）：情報フローの基盤"></h3>
                        <p class="mt-2" data-lang-vi='Đây là nguyên tắc cơ bản và nổi tiếng nhất, là "xương sống" của giao tiếp trong doanh nghiệp Nhật. Nó tập trung vào trách nhiệm của nhân viên trong việc chủ động cập nhật thông tin cho cấp trên.' data-lang-jp='これは最も基本的で有名な原則であり、日本のビジネスコミュニケーションの「背骨」です。部下が上司に積極的に情報を更新する責任に焦点を当てています。'></p>
                        <ul class="mt-4 space-y-2 pl-5">
                            <li data-lang-vi='<strong>Ho (Hokoku - 報告): Báo cáo:</strong> Báo cáo khi hoàn thành công việc, khi có tiến triển quan trọng, hoặc khi có sự cố xảy ra. Đây là báo cáo về kết quả.' data-lang-jp='<strong>報（ほうこく - 報告）：</strong>業務完了時、重要な進捗があった時、または問題が発生した時に報告します。これは結果に関する報告です。'></li>
                            <li data-lang-vi='<strong>Ren (Renraku - 連絡): Liên lạc:</strong> Liên lạc để truyền đạt những thông tin, sự thật đơn thuần, không mang tính phán xét hay ý kiến cá nhân (ví dụ: "Cuộc họp đã được dời sang 3 giờ chiều"). Đây là việc truyền dữ kiện.' data-lang-jp='<strong>連（れんらく - 連絡）：</strong>個人的な判断や意見を含まない単純な情報や事実を伝えるための連絡です（例：「会議は午後3時に変更されました」）。これはデータの伝達です。'></li>
                            <li data-lang-vi='<strong>Sou (Soudan - 相談): Bàn bạc/Tham khảo ý kiến:</strong> Khi gặp khó khăn, vướng mắc hoặc có nhiều phương án lựa chọn, nhân viên cần chủ động tìm đến cấp trên hoặc người có kinh nghiệm để cùng thảo luận, tìm giải pháp. Đây là hành động tìm kiếm sự hỗ trợ và định hướng.' data-lang-jp='<strong>相（そうだん - 相談）：</strong>困難や問題に直面した場合、または複数の選択肢がある場合、部下は上司や経験者に積極的に相談し、解決策を見つけるために話し合う必要があります。これは支援と方向性を求める行動です。'></li>
                        </ul>
                        <p class="mt-4 font-semibold" data-lang-vi="=> Tóm lại, Hou-Ren-Sou đảm bảo thông tin được chảy từ dưới lên một cách thông suốt, giúp quản lý nắm bắt tình hình và ngăn chặn rủi ro kịp thời." data-lang-jp="=> 要するに、報連相はボトムアップの情報フローを円滑にし、管理者が状況を把握し、タイムリーにリスクを防ぐのに役立ちます。"></p>
                    </div>
                    <div class="md:col-span-1">
                         <img src="https://lh3.googleusercontent.com/d/1_KQa0UNZkpB0FudIFnZboMI6QX_6LsJO" alt="Minh họa Hou-Ren-So" class="rounded-lg w-full h-auto object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x400/e0f2fe/0c4a6e?text=H%C3%ACnh+minh+h%E1%BB%8Da'">
                    </div>
                </div>

                <div class="content-section grid grid-cols-1 md:grid-cols-3 gap-8 items-center">
                    <div class="md:col-span-2">
                        <h3 class="text-2xl font-bold text-teal-700" data-lang-vi="2. O-Hi-Ta-Shi (おひたし): Thái độ của người quản lý khi tiếp nhận thông tin" data-lang-jp="2. おひたし：情報を受け取る際の管理者の態度"></h3>
                        <p class="mt-2" data-lang-vi='Nếu Hou-Ren-Sou là trách nhiệm của nhân viên, thì O-Hi-Ta-Shi chính là trách nhiệm của người quản lý để tạo ra một môi trường an toàn, khuyến khích nhân viên thực hiện Hou-Ren-Sou. Tên gọi này là một cách chơi chữ thú vị (Ohitashi là tên một món rau luộc của Nhật).' data-lang-jp='報連相が部下の責任であるならば、おひたしは管理者が安全な環境を作り、部下が報連相を実践するよう奨励する責任です。この名前は面白い言葉遊びです（おひたしは日本の茹で野菜料理の名前です）。'></p>
                         <ul class="mt-4 space-y-2 pl-5">
                            <li data-lang-vi='<strong>O (Okoranai - 怒らない): Không tức giận:</strong> Khi nhân viên báo cáo tin xấu hoặc sai sót, người quản lý không được nổi giận, chỉ trích.' data-lang-jp='<strong>お（おこらない - 怒らない）：</strong>部下が悪いニュースやミスを報告したとき、管理者は怒ったり、批判したりしてはいけません。'></li>
                            <li data-lang-vi='<strong>Hi (Hitei shinai - 否定しない): Không phủ nhận:</strong> Lắng nghe ý kiến của nhân viên một cách cởi mở, không gạt phắt đi ngay cả khi nó trái với suy nghĩ của mình.' data-lang-jp='<strong>ひ（ひていしない - 否定しない）：</strong>自分の考えと違っていても、部下の意見をオープンに聞き、すぐに否定しないこと。'></li>
                            <li data-lang-vi='<strong>Ta (Tasukeru - 助ける): Giúp đỡ:</strong> Thay vì chỉ tay năm ngón, hãy hỏi "Tôi có thể giúp gì?" và cùng nhân viên tìm cách giải quyết vấn đề.' data-lang-jp='<strong>た（たすける - 助ける）：</strong>指示するだけでなく、「何か手伝えることはありますか？」と尋ね、部下と一緒に問題解決に取り組むこと。'></li>
                            <li data-lang-vi='<strong>Shi (Shiji suru - 指示する): Chỉ thị/Hướng dẫn:</strong> Sau khi lắng nghe và thấu hiểu, đưa ra những chỉ dẫn rõ ràng, cụ thể để nhân viên hành động.' data-lang-jp='<strong>し（しじする - 指示する）：</strong>聞き、理解した後、部下が行動できるように明確で具体的な指示を出すこと。'></li>
                        </ul>
                        <p class="mt-4 font-semibold" data-lang-vi="=> Tóm lại, O-Hi-Ta-Shi là nghệ thuật lắng nghe và phản hồi của người lãnh đạo. Nó là chất xúc tác để Hou-Ren-Sou có thể tồn tại và phát huy hiệu quả." data-lang-jp="=> 要するに、おひたしはリーダーの傾聴とフィードバックの芸術です。報連相が存在し、効果を発揮するための触媒となります。"></p>
                    </div>
                    <div class="md:col-span-1">
                        <img src="https://lh3.googleusercontent.com/d/1TraDPP7-qwn5co1azE_rr0CpKuk4_hMr" alt="Minh họa O-HI-TA-SHI" class="rounded-lg w-full h-auto object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x200/eef2ff/312e81?text=O-HI-TA-SHI'">
                    </div>
                </div>

                <div class="content-section grid grid-cols-1 md:grid-cols-3 gap-8 items-center">
                    <div class="md:col-span-2">
                        <h3 class="text-2xl font-bold text-blue-700" data-lang-vi="3. Kaku-Ren-Bou (確連報): Sự chủ động xác nhận để đảm bảo chất lượng" data-lang-jp="3. 確連報（かくれんぼう）：品質を確保するための主体的確認"></h3>
                        <p class="mt-2" data-lang-vi="Đây là một biến thể nâng cao của Hou-Ren-Sou, nhấn mạnh vào sự chủ động và chính xác trong giao tiếp hai chiều." data-lang-jp="これは報連相の進化版であり、双方向のコミュニケーションにおける主体性と正確性を強調します。"></p>
                        <ul class="mt-4 space-y-2 pl-5">
                            <li data-lang-vi='<strong>Kaku (Kakunin - 確認): Xác nhận:</strong> Đây là điểm cốt lõi và khác biệt nhất. Chủ động xác nhận lại thông tin để đảm bảo đôi bên hiểu đúng và giống nhau. Ví dụ: "Để chắc chắn, tôi xin xác nhận lại yêu cầu của anh là A và B, deadline là ngày C, đúng không ạ?". Việc xác nhận này diễn ra ở cả hai phía, trước, trong và sau khi thực hiện công việc.' data-lang-jp='<strong>確（かくにん - 確認）：</strong>これが最も重要で異なる点です。双方が同じ理解をしていることを確認するために、情報を主体的に再確認します。例：「念のため、ご依頼はAとB、締め切りはC日でよろしいでしょうか？」この確認は、作業の前後、作業中に双方で行われます。'></li>
                            <li data-lang-vi='<strong>Ren (Renraku - 連絡): Liên lạc:</strong> Tương tự như trong Hou-Ren-Sou, là việc chia sẻ thông tin, dữ kiện.' data-lang-jp='<strong>連（れんらく - 連絡）：</strong>報連相と同様に、情報やデータを共有することです。'></li>
                            <li data-lang-vi='<strong>Bou (Hokoku - 報告): Báo cáo:</strong> Tương tự như trong Hou-Ren-Sou, là việc báo cáo tiến độ và kết quả. (Lưu ý: "Bou" ở đây thường được hiểu là cách nói rút gọn của Hokoku).' data-lang-jp='<strong>報（ほうこく - 報告）：</strong>報連相と同様に、進捗と結果を報告することです。（注意：「報」はここでは報告の略語として理解されることが多いです）。'></li>
                        </ul>
                         <p class="mt-4 font-semibold" data-lang-vi='=> Tóm lại, Kaku-Ren-Bou tập trung vào việc "chống nhiễu" thông tin, đảm bảo sự chính xác và đồng bộ tuyệt đối giữa các bên liên quan.' data-lang-jp='=> 要するに、確連報は情報の「ノイズ」を防ぎ、関係者間の絶対的な正確性と同期を確保することに重点を置いています。'></p>
                    </div>
                     <div class="md:col-span-1">
                        <img src="https://lh3.googleusercontent.com/d/1YPjMhkWfMI5ZfTIxRDhgF16G0C6Ok9px" alt="Minh họa KAKU-REN-BO" class="rounded-lg w-full h-auto object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x200/eef2ff/312e81?text=KAKU-REN-BO'">
                    </div>
                </div>
            </div>

            <!-- Tab Content: Comparison -->
            <div id="tab-content-comparison" class="tab-pane pt-8 relative">
                 <h2 class="tab-main-title" data-lang-vi="SO SÁNH VÀ ĐỐI CHIẾU CÁC KHÁI NIỆM" data-lang-jp="概念の比較対照"></h2>
                 <button onclick="toggleSpeech('tab-content-comparison')" class="speaker-button" data-tab-id="tab-content-comparison" aria-label="Đọc nội dung">
                    <svg class="w-6 h-6 speaker-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"></path></svg>
                    <svg class="w-6 h-6 stop-icon hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M9 9.563C9 9.253 9.253 9 9.563 9h4.874c.31 0 .563.253.563.563v4.874c0 .31-.253.563-.563.563H9.563C9.253 15 9 14.747 9 14.437V9.563z"></path></svg>
                </button>
                <div class="space-y-24">
                    <!-- Comparison and AI tool content -->
                    <section id="comparison-section" class="content-section">
                        <div class="text-center mb-12">
                            <h2 class="section-title" data-lang-vi="Phần 1: So Sánh &amp; Đối Chiếu" data-lang-jp="パート1：比較対照"></h2>
                            <p class="section-subtitle" data-lang-vi="Nhìn nhận sự khác biệt và vai trò của từng nguyên tắc trong bức tranh tổng thể." data-lang-jp="全体像における各原則の違いと役割を認識する。"></p>
                        </div>
                        <div class="feature-card p-6 table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th data-lang-vi="Tiêu chí" data-lang-jp="基準"></th>
                                        <th class="text-orange-600">Hou-Ren-Sou</th>
                                        <th class="text-teal-600">O-Hi-Ta-Shi</th>
                                        <th class="text-blue-600">Kaku-Ren-Bou</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="font-semibold" data-lang-vi="Mục đích chính" data-lang-jp="主な目的"></td>
                                        <td data-lang-vi="Đảm bảo dòng chảy thông tin từ dưới lên, phòng ngừa rủi ro." data-lang-jp="ボトムアップの情報フローを確保し、リスクを予防する。"></td>
                                        <td data-lang-vi="Tạo môi trường tâm lý an toàn để khuyến khích giao tiếp." data-lang-jp="コミュニケーションを促進するための心理的に安全な環境を作る。"></td>
                                        <td data-lang-vi="Đảm bảo sự chính xác, rõ ràng và đồng bộ trong thông tin." data-lang-jp="情報の正確性、明確性、一貫性を確保する。"></td>
                                    </tr>
                                    <tr>
                                        <td class="font-semibold" data-lang-vi="Trọng tâm" data-lang-jp="重点"></td>
                                        <td data-lang-vi="Trách nhiệm <strong>của nhân viên</strong> trong việc báo cáo." data-lang-jp="報告における<strong>従業員の</strong>責任。"></td>
                                        <td data-lang-vi="Thái độ và cách phản hồi <strong>của quản lý</strong>." data-lang-jp="<strong>管理者の</strong>態度とフィードバック方法。"></td>
                                        <td data-lang-vi="Hành động chủ động <strong>xác nhận của cả hai phía</strong>." data-lang-jp="<strong>双方による</strong>主体的な確認行動。"></td>
                                    </tr>
                                    <tr>
                                        <td class="font-semibold" data-lang-vi="Luồng giao tiếp" data-lang-jp="コミュニケーションの流れ"></td>
                                        <td data-lang-vi="Chủ yếu là <strong>một chiều</strong> (từ dưới lên)." data-lang-jp="主に<strong>一方通行</strong>（ボトムアップ）。"></td>
                                        <td data-lang-vi="Hỗ trợ cho luồng giao tiếp hai chiều." data-lang-jp="双方向のコミュニケーションをサポートする。"></td>
                                        <td data-lang-vi="Nhấn mạnh giao tiếp <strong>hai chiều</strong>, tương tác liên tục." data-lang-jp="<strong>双方向</strong>の継続的な対話を重視する。"></td>
                                    </tr>
                                     <tr>
                                        <td class="font-semibold" data-lang-vi="Bản chất" data-lang-jp="本質"></td>
                                        <td data-lang-vi="Là một <strong>QUY TRÌNH</strong> cần tuân thủ." data-lang-jp="遵守すべき<strong>プロセス</strong>である。"></td>
                                        <td data-lang-vi="Là một <strong>NGUYÊN TẮC</strong> về ứng xử, một <strong>VĂN HÓA</strong>." data-lang-jp="行動に関する<strong>原則</strong>であり、<strong>文化</strong>である。"></td>
                                        <td data-lang-vi="Là một <strong>THÓI QUEN</strong> làm việc chuyên nghiệp." data-lang-jp="プロフェッショナルな業務<strong>習慣</strong>である。"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </section>
                    <section class="content-section">
                        <h2 class="section-title text-center" data-lang-vi="Phần 2: Hệ thống giao tiếp toàn diện: Sự cộng hưởng hoàn hảo" data-lang-jp="パート2：包括的なコミュニケーションシステム：完璧な相乗効果"></h2>
                        <p class="section-subtitle text-center mb-8" data-lang-vi="Ba khái niệm này không hề xung đột mà bổ trợ cho nhau để tạo ra một vòng tròn giao tiếp khép kín, hiệu quả và nhân văn." data-lang-jp="これらの3つの概念は対立するものではなく、相互に補完し合い、完結した効果的で人間味のあるコミュニケーションの輪を生み出します。"></p>
                        
                        <div class="space-y-6">
                            <div>
                                <h4 data-lang-vi="O-Hi-Ta-Shi tạo ra &quot;mảnh đất màu mỡ&quot;" data-lang-jp="おひたしが「肥沃な土壌」を作る"></h4>
                                <p data-lang-vi="Người quản lý thực hành O-Hi-Ta-Shi, tạo ra một không khí làm việc tin tưởng, cởi mở. Nhân viên không còn sợ hãi khi phải báo cáo tin xấu hay thừa nhận sai lầm. Đây là điều kiện CẦN." data-lang-jp="管理者がおひたしを実践することで、信頼に基づいたオープンな職場環境が生まれます。従業員は悪いニュースを報告したり、ミスを認めたりすることを恐れなくなります。これは必要条件です。"></p>
                            </div>
                            <div>
                                <h4 data-lang-vi="Hou-Ren-Sou là &quot;hạt giống được gieo trồng&quot;" data-lang-jp="報連相は「蒔かれた種」"></h4>
                                <p data-lang-vi="Trên mảnh đất màu mỡ đó, nhân viên sẽ tự giác và chủ động thực hiện Hou-Ren-Sou. Dòng chảy thông tin trở nên thông suốt, minh bạch. Ban quản lý luôn nắm được tình hình thực tế để ra quyết định đúng đắn." data-lang-jp="その肥沃な土壌の上で、従業員は自発的かつ主体的に報連相を実践します。情報フローが円滑かつ透明になり、経営陣は常に現状を把握し、正しい意思決定を下すことができます。"></p>
                            </div>
                             <div>
                                <h4 data-lang-vi="Kaku-Ren-Bou là &quot;kỹ thuật chăm sóc&quot;" data-lang-jp="確連報は「育成の技術」"></h4>
                                <p data-lang-vi="Để đảm bảo hạt giống nảy mầm và phát triển đúng hướng, cả quản lý và nhân viên cùng nhau thực hành Kaku-Ren-Bou. Mọi yêu cầu, chỉ thị, thông tin đều được &quot;tưới tắm&quot; bằng việc xác nhận cẩn thận. Điều này loại bỏ hoàn toàn rủi ro do &quot;hiểu lầm&quot;, &quot;tam sao thất bản&quot;, đảm bảo mọi người cùng nhìn về một hướng và hành động đồng bộ." data-lang-jp="種が芽吹き、正しい方向に成長するために、管理者と従業員は共に確連報を実践します。すべての要求、指示、情報は慎重な確認によって「水やり」されます。これにより、「誤解」や「伝言ゲーム」によるリスクを完全に排除し、全員が同じ方向を向いて一貫して行動することを保証します。"></p>
                            </div>
                        </div>

                        <h4 class="mt-8" data-lang-vi="Hãy hình dung một kịch bản:" data-lang-jp="シナリオを想像してみましょう："></h4>
                        <div class="space-y-4">
                            <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-400"><strong data-lang-vi="Không có O-Hi-Ta-Shi:" data-lang-jp="おひたしがない場合："></strong> <span data-lang-vi="Quản lý hay gắt gỏng. Nhân viên sẽ giấu nhẹm sai sót. Hou-Ren-Sou thất bại. Dự án gặp sự cố bất ngờ." data-lang-jp="管理者は怒りっぽくなります。従業員はミスを隠します。報連相は失敗します。プロジェクトは予期せぬ問題に直面します。"></span></div>
                            <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-400"><strong data-lang-vi="Chỉ có Hou-Ren-Sou:" data-lang-jp="報連相だけの場合："></strong> <span data-lang-vi="Nhân viên báo cáo đều đặn, nhưng quản lý có thể hiểu sai ý, hoặc nhân viên hiểu sai chỉ thị. Rủi ro từ hiểu lầm vẫn còn đó." data-lang-jp="従業員は定期的に報告しますが、管理者が意図を誤解したり、従業員が指示を誤解したりする可能性があります。誤解から生じるリスクは依然として残ります。"></span></div>
                            <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-400"><strong data-lang-vi="Khi có cả ba:" data-lang-jp="三つが揃った場合："></strong>
                                <ul class="list-none p-0 mt-2 space-y-2">
                                    <li data-lang-vi="<strong>Quản lý (O-Hi-Ta-Shi):</strong> &quot;Cảm ơn em đã báo cáo vấn đề này. Đừng lo, chúng ta cùng xem xét.&quot;" data-lang-jp="<strong>管理者（おひたし）：</strong>「この問題を報告してくれてありがとう。心配しないで、一緒に考えよう。」"></li>
                                    <li data-lang-vi="<strong>Nhân viên (Hou-Ren-Sou):</strong> &quot;Thưa anh, em gặp khó khăn ở điểm X, em đề xuất 2 phương án Y và Z, xin anh cho ý kiến.&quot;" data-lang-jp="<strong>従業員（報連相）：</strong>「X点で困難に直面しており、YとZの2つの案を提案します。ご意見をお願いします。」"></li>
                                    <li data-lang-vi="<strong>Cả hai (Kaku-Ren-Bou):</strong> &quot;Vậy chúng ta thống nhất chọn phương án Y nhé. Để chắc chắn, em xin nhắc lại các bước cần làm là 1, 2, 3. Có đúng không ạ?&quot; - &quot;Đúng rồi em, cứ thế triển khai nhé.&quot;" data-lang-jp="<strong>両者（確連報）：</strong>「では、Y案で合意しましょう。念のため、手順は1、2、3で間違いないでしょうか？」-「その通りです。それで進めてください。」"></li>
                                </ul>
                            </div>
                        </div>
                    </section>
                    <section class="content-section">
                        <h2 class="section-title text-center" data-lang-vi="Phần 3: Kết luận" data-lang-jp="パート3：結論"></h2>
                        <div class="max-w-4xl mx-auto text-lg text-slate-700 space-y-4 text-center">
                            <p data-lang-vi="Nếu <strong>Hou-Ren-Sou</strong> là bộ khung xương của hệ thống giao tiếp, thì <strong>O-Hi-Ta-Shi</strong> là trái tim bơm máu và tạo ra sinh khí, còn <strong>Kaku-Ren-Bou</strong> chính là hệ thần kinh đảm bảo mọi mệnh lệnh được truyền đi chính xác tuyệt đối." data-lang-jp="もし<strong>報連相</strong>がコミュニケーションシステムの骨格であるならば、<strong>おひたし</strong>は血液を送り生命を生み出す心臓であり、<strong>確連報</strong>は全ての命令が絶対的な正確さで伝達されることを保証する神経系である。"></p>
                            <p class="font-semibold text-slate-900" data-lang-vi="Một nhà quản lý xuất sắc không chỉ yêu cầu nhân viên thực hiện Hou-Ren-Sou, mà phải là người tiên phong thực hành O-Hi-Ta-Shi và cùng đội nhóm xây dựng thói quen Kaku-Ren-Bou. Khi đó, bạn sẽ không chỉ có một đội nhóm hiệu suất cao, mà còn là một tập thể gắn kết, tin tưởng và cùng nhau phát triển bền vững." data-lang-jp="優れた管理者は、従業員に報連相を要求するだけでなく、おひたしを率先して実践し、チームと共に確連報の習慣を築き上げなければならない。そうすることで、高性能なチームだけでなく、結束し、信頼し合い、共に持続的に発展する集団を築くことができる。"></p>
                        </div>
                    </section>
                    <section id="ai-tools">
                        <div class="text-center mb-12">
                            <h2 class="section-title" data-lang-vi="Công Cụ AI Hỗ Trợ Giao Tiếp" data-lang-jp="AIコミュニケーション支援ツール"></h2>
                            <p class="section-subtitle" data-lang-vi="Áp dụng các nguyên tắc vào thực tế công việc hàng ngày của bạn với sự trợ giúp từ AI." data-lang-jp="AIの助けを借りて、原則を日々の業務に適用しましょう。"></p>
                        </div>
                        <div class="feature-card p-8 max-w-4xl mx-auto">
                             <textarea id="ai-input" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500" rows="5" placeholder="Nhập tình huống hoặc dán nội dung email/tin nhắn cần AI hỗ trợ..."></textarea>
                             <div class="flex flex-wrap justify-center gap-4 mt-4">
                                 <button onclick="runAITool('draft')" class="gemini-button" data-lang-vi="Soạn Thảo" data-lang-jp="作成"></button>
                                 <button onclick="runAITool('analyze')" class="gemini-button" data-lang-vi="Phân Tích" data-lang-jp="分析"></button>
                                 <button onclick="runAITool('soudan')" class="gemini-button" data-lang-vi="Tìm Giải Pháp" data-lang-jp="解決策検索"></button>
                                 <button onclick="runAITool('summarize')" class="gemini-button" data-lang-vi="Tóm Tắt" data-lang-jp="要約"></button>
                                 <button onclick="runAITool('scenario')" class="gemini-button" data-lang-vi="Tạo Kịch Bản" data-lang-jp="シナリオ作成"></button>
                                 <button onclick="clearAIResult()" class="gemini-button bg-slate-500 hover:bg-slate-600" data-lang-vi="Xóa" data-lang-jp="削除"></button>
                             </div>
                             <div class="mt-6">
                                <h4 class="font-semibold text-lg text-slate-800 mb-2" data-lang-vi="Gợi ý từ AI:" data-lang-jp="AIからの提案："></h4>
                                <div id="ai-result-box" class="result-box whitespace-pre-wrap">
                                    <p class="text-slate-500 text-center" data-lang-vi="Kết quả từ AI sẽ xuất hiện ở đây." data-lang-jp="AIからの結果はここに表示されます。"></p>
                                </div>
                             </div>
                        </div>
                    </section>
                </div>
            </div>
            
            <!-- Tab Content: Build & Maintain -->
            <div id="tab-content-build" class="tab-pane pt-8 space-y-8 relative">
                 <h2 class="tab-main-title" data-lang-vi="XÂY DỰNG VÀ DUY TRÌ GIAO TIẾP TOÀN DIỆN" data-lang-jp="包括的なコミュニケーションの構築と維持"></h2>
                 <button onclick="toggleSpeech('tab-content-build')" class="speaker-button" data-tab-id="tab-content-build" aria-label="Đọc nội dung">
                    <svg class="w-6 h-6 speaker-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"></path></svg>
                    <svg class="w-6 h-6 stop-icon hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M9 9.563C9 9.253 9.253 9 9.563 9h4.874c.31 0 .563.253.563.563v4.874c0 .31-.253.563-.563.563H9.563C9.253 15 9 14.747 9 14.437V9.563z"></path></svg>
                    <div class="loader-small hidden"></div>
                </button>
                <div class="content-section">
                    <div class="space-y-8 mt-8">
                        
                        <div class="p-6 rounded-lg bg-orange-50 border-l-4 border-orange-400">
                            <h3 class="flex items-center gap-3 text-2xl font-bold text-orange-800" data-lang-vi="I. Thúc đẩy và duy trì HOU-REN-SOU" data-lang-jp="I. 報連相の推進と維持"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 14v6m-3-3h6M6 10h2a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2zm10 0h2a2 2 0 002-2V6a2 2 0 00-2-2h-2a2 2 0 00-2 2v2a2 2 0 002 2zM6 20h2a2 2 0 002-2v-2a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2z" /></svg></h3>
                            <h4 class="text-orange-700" data-lang-vi="A. Đào tạo và Nâng cao Nhận thức về Hou-Ren-Sou" data-lang-jp="A. 報連相に関する研修と意識向上"></h4>
                            <div class="mt-4 text-slate-700 space-y-4">
                                <div>
                                    <strong class="text-orange-600" data-lang-vi="Báo cáo (Hokoku):" data-lang-jp="報告 (Hokoku):"></strong>
                                    <ul class="list-none space-y-2 mt-2 pl-5">
                                        <li class="flex"><span class="mr-2 text-orange-400">▸</span><div data-lang-vi="<strong>Đào tạo về nội dung báo cáo hiệu quả:</strong> Hướng dẫn nhân viên cách xác định thông tin quan trọng cần báo cáo, mức độ chi tiết phù hợp, và cách trình bày báo cáo một cách ngắn gọn, rõ ràng, dễ hiểu." data-lang-jp="<strong>効果的な報告内容に関する研修：</strong>従業員に、報告すべき重要な情報、適切な詳細レベル、簡潔で分かりやすい報告書の作成方法を指導する。"></div></li>
                                        <li class="flex"><span class="mr-2 text-orange-400">▸</span><div data-lang-vi="<strong>Hướng dẫn về thời điểm báo cáo:</strong> Quy định rõ khi nào cần báo cáo (định kỳ, khi hoàn thành công việc, khi có sự cố, khi có thay đổi quan trọng). Ví dụ: Báo cáo tiến độ dự án hàng ngày/tuần vào cuối ngày/tuần, báo cáo sự cố ngay khi phát hiện." data-lang-jp="<strong>報告のタイミングに関する指導：</strong>報告が必要な時期（定期的、業務完了時、問題発生時、重要な変更があった時）を明確に規定する。例：プロジェクトの進捗を毎日・毎週の終わりに報告し、問題を発見次第すぐに報告する。"></div></li>
                                        <li class="flex"><span class="mr-2 text-orange-400">▸</span><div data-lang-vi="<strong>Thực hành tình huống báo cáo:</strong> Tổ chức các hoạt cảnh để nhân viên thực hành báo cáo trong các tình huống khác nhau và nhận phản hồi." data-lang-jp="<strong>報告状況の実践：</strong>従業員がさまざまな状況で報告を実践し、フィードバックを受けられるようにロールプレイングセッションを企画する。"></div></li>
                                        <li class="flex"><span class="mr-2 text-orange-400">▸</span><div data-lang-vi="<strong>Mẫu báo cáo chuẩn hóa:</strong> Cung cấp các mẫu báo cáo (bằng văn bản, slide, hoặc trên các công cụ quản lý) để đảm bảo tính nhất quán và đầy đủ thông tin." data-lang-jp="<strong>標準化された報告テンプレート：</strong>一貫性と情報の完全性を確保するために、報告テンプレート（文書、スライド、または管理ツール上）を提供する。"></div></li>
                                    </ul>
                                </div>
                                <div>
                                    <strong class="text-orange-600" data-lang-vi="Liên lạc (Renraku):" data-lang-jp="連絡 (Renraku):"></strong>
                                    <ul class="list-none space-y-2 mt-2 pl-5">
                                         <li class="flex"><span class="mr-2 text-orange-400">▸</span><div data-lang-vi="<strong>Đào tạo về các kênh liên lạc phù hợp:</strong> Hướng dẫn khi nào nên sử dụng email (thông tin chính thức, cần lưu trữ), chat nội bộ (thông tin nhanh, trao đổi ngắn), điện thoại (thông tin khẩn cấp, cần trao đổi trực tiếp), họp mặt (thảo luận phức tạp, xây dựng mối quan hệ)." data-lang-jp="<strong>適切な連絡手段に関する研修：</strong>いつメール（公式情報、要保管）、社内チャット（迅速な情報、短いやり取り）、電話（緊急情報、直接対話が必要）、会議（複雑な議論、関係構築）を使用すべきかを指導する。"></div></li>
                                         <li class="flex"><span class="mr-2 text-orange-400">▸</span><div data-lang-vi="<strong>Quy tắc ứng xử khi liên lạc:</strong> Hướng dẫn về cách sử dụng ngôn ngữ lịch sự, rõ ràng, tránh gây hiểu lầm, và cách phản hồi thông tin kịp thời. Ví dụ: Tiêu đề email rõ ràng, trả lời email trong vòng X giờ làm việc." data-lang-jp="<strong>連絡時の行動規範：</strong>丁寧で明確な言葉遣い、誤解を避ける方法、タイムリーな情報返信方法について指導する。例：明確なメール件名、X営業時間内のメール返信。"></div></li>
                                         <li class="flex"><span class="mr-2 text-orange-400">▸</span><div data-lang-vi="<strong>Xây dựng danh bạ liên lạc dễ dàng truy cập:</strong> Đảm bảo nhân viên có thể dễ dàng tìm thấy thông tin liên lạc hoặc thông báo của đồng nghiệp và các bộ phận liên quan." data-lang-jp="<strong>アクセスしやすい連絡先リストの作成：</strong>従業員が同僚や関連部署の連絡先情報や通知を簡単に見つけられるようにする。"></div></li>
                                    </ul>
                                </div>
                                <div>
                                    <strong class="text-orange-600" data-lang-vi="Thảo luận/Tham khảo ý kiến (Soudan):" data-lang-jp="相談 (Soudan):"></strong>
                                    <ul class="list-none space-y-2 mt-2 pl-5">
                                        <li class="flex"><span class="mr-2 text-orange-400">▸</span><div data-lang-vi="<strong>Khuyến khích chủ động tìm kiếm sự hỗ trợ:</strong> Nhấn mạnh rằng việc tham khảo ý kiến không phải là dấu hiệu của sự yếu kém mà là một hành động chuyên nghiệp để đưa ra quyết định tốt hơn và tránh sai sót." data-lang-jp="<strong>積極的な支援要請の奨励：</strong>相談は弱さのしるしではなく、より良い意思決定を行い、ミスを避けるためのプロフェッショナルな行動であることを強調する。"></div></li>
                                        <li class="flex"><span class="mr-2 text-orange-400">▸</span><div data-lang-vi="<strong>Hướng dẫn cách đặt câu hỏi hiệu quả:</strong> Dạy nhân viên cách chuẩn bị trước khi thảo luận, xác định rõ vấn đề cần xin ý kiến và các thông tin liên quan." data-lang-jp="<strong>効果的な質問方法の指導：</strong>議論の前に準備し、相談したい問題を明確にし、関連情報を特定する方法を従業員に教える。"></div></li>
                                        <li class="flex"><span class="mr-2 text-orange-400">▸</span><div data-lang-vi="<strong>Tạo không gian và thời gian cho thảo luận:</strong> Khuyến khích các buổi họp nhóm nhỏ, các buổi &quot;one-on-one&quot; giữa nhân viên và quản lý để tạo cơ hội thảo luận cởi mở." data-lang-jp="<strong>議論のためのスペースと時間の創出：</strong>オープンな議論の機会を作るために、小グループでの会議や従業員と管理者との1対1のミーティングを奨励する。"></div></li>
                                    </ul>
                                </div>
                            </div>
                            <h4 class="text-orange-700" data-lang-vi="B. Xây dựng Văn hóa Hou-Ren-Sou" data-lang-jp="B. 報連相文化の構築"></h4>
                            <ul class="list-none space-y-2 mt-4 text-slate-700">
                                <li class="flex"><span class="mr-2 text-orange-500">▸</span><div data-lang-vi="<strong>Tạo thói quen Hou-Ren-Sou:</strong> Khuyến khích và nhắc nhở nhân viên thực hiện Hou-Ren-Sou một cách thường xuyên và tự giác." data-lang-jp="<strong>報連相の習慣化：</strong>従業員に定期的かつ自発的に報連相を実践するよう奨励し、注意を促す。"></div></li>
                                <li class="flex"><span class="mr-2 text-orange-500">▸</span><div data-lang-vi="<strong>Công nhận và biểu dương:</strong> Biểu dương những cá nhân, đội nhóm thực hiện tốt Hou-Ren-Sou, ví dụ: báo cáo kịp thời giúp ngăn chặn rủi ro, liên lạc hiệu quả giúp phối hợp tốt giữa các bộ phận, chủ động thảo luận để đưa ra giải pháp sáng tạo." data-lang-jp="<strong>承認と表彰：</strong>報連相をうまく実践した個人やチームを表彰する。例：タイムリーな報告でリスクを未然に防いだ、効果的な連絡で部署間の連携を円滑にした、主体的な議論で創造的な解決策を提案した。"></div></li>
                                <li class="flex"><span class="mr-2 text-orange-500">▸</span><div data-lang-vi="<strong>Chia sẻ những lợi ích thực tế:</strong> Chia sẻ những câu chuyện, ví dụ cụ thể về việc Hou-Ren-Sou đã giúp giải quyết vấn đề, nâng cao hiệu quả công việc như thế nào." data-lang-jp="<strong>実際のメリットの共有：</strong>報連相が問題解決や業務効率向上にどのように役立ったかについての具体的なストーリーや事例を共有する。"></div></li>
                            </ul>
                        </div>

                        <div class="p-6 rounded-lg bg-teal-50 border-l-4 border-teal-400">
                            <h3 class="flex items-center gap-3 text-2xl font-bold text-teal-800" data-lang-vi="II. Thúc đẩy và duy trì O-HI-TA-SHI" data-lang-jp="II. おひたしの推進と維持"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-teal-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg></h3>
                            <h4 class="text-teal-700" data-lang-vi="A. Đào tạo và Nâng cao Nhận thức về O-Hi-Ta-Shi cho Quản lý" data-lang-jp="A. 管理者向けのおひたしに関する研修と意識向上"></h4>
                            <div class="mt-4 text-slate-700 space-y-4">
                                <div>
                                    <strong class="text-teal-600" data-lang-vi="Không giận (Okoranai):" data-lang-jp="怒らない (Okoranai):"></strong>
                                    <ul class="list-none space-y-2 mt-2 pl-5">
                                        <li class="flex"><span class="mr-2 text-teal-400">▸</span><div data-lang-vi="<strong>Quản lý cảm xúc:</strong> Đào tạo về kỹ năng quản lý cảm xúc, đặc biệt là trong các tình huống căng thẳng khi nhận được báo cáo không tốt." data-lang-jp="<strong>感情管理：</strong>特に悪い報告を受けた際のストレスの多い状況における感情管理スキルに関する研修。"></div></li>
                                        <li class="flex"><span class="mr-2 text-teal-400">▸</span><div data-lang-vi="<strong>Tập trung vào giải pháp, không đổ lỗi:</strong> Hướng dẫn quản lý cách phản ứng một cách bình tĩnh, tập trung vào việc tìm hiểu nguyên nhân và đưa ra giải pháp thay vì chỉ trích nhân viên." data-lang-jp="<strong>解決策に焦点を当て、非難しない：</strong>従業員を批判するのではなく、冷静に対応し、原因の究明と解決策の提案に集中する方法を管理者に指導する。"></div></li>
                                        <li class="flex"><span class="mr-2 text-teal-400">▸</span><div data-lang-vi="<strong>Xây dựng văn hóa học hỏi từ sai lầm:</strong> Khuyến khích quản lý xem sai lầm là cơ hội để học hỏi và cải thiện." data-lang-jp="<strong>失敗から学ぶ文化の構築：</strong>管理者に失敗を学びと改善の機会と見なすよう奨励する。"></div></li>
                                    </ul>
                                </div>
                                <div>
                                    <strong class="text-teal-600" data-lang-vi="Không phủ định (Hitei Shinai):" data-lang-jp="否定しない (Hitei Shinai):"></strong>
                                    <ul class="list-none space-y-2 mt-2 pl-5">
                                        <li class="flex"><span class="mr-2 text-teal-400">▸</span><div data-lang-vi="<strong>Kỹ năng lắng nghe tích cực:</strong> Đào tạo về cách lắng nghe chân thành, thể hiện sự tôn trọng đối với ý kiến của nhân viên, ngay cả khi không đồng ý." data-lang-jp="<strong>積極的傾聴スキル：</strong>同意できない場合でも、誠実に耳を傾け、従業員の意見に敬意を示す方法に関する研修。"></div></li>
                                        <li class="flex"><span class="mr-2 text-teal-400">▸</span><div data-lang-vi="<strong>Phản hồi mang tính xây dựng:</strong> Hướng dẫn cách đưa ra phản hồi một cách nhẹ nhàng, tập trung vào điểm cần cải thiện và đưa ra gợi ý cụ thể thay vì phủ định hoàn toàn ý tưởng của nhân viên." data-lang-jp="<strong>建設的なフィードバック：</strong>従業員のアイデアを完全に否定するのではなく、改善点に焦点を当て、具体的な提案を行う、穏やかなフィードバックの方法を指導する。"></div></li>
                                        <li class="flex"><span class="mr-2 text-teal-400">▸</span><div data-lang-vi="<strong>Khuyến khích tư duy đa chiều:</strong> Tạo môi trường mà các ý tưởng khác biệt được chào đón và xem xét một cách nghiêm túc." data-lang-jp="<strong>多角的な思考の奨励：</strong>異なるアイデアが歓迎され、真剣に検討される環境を作る。"></div></li>
                                    </ul>
                                </div>
                                <div>
                                    <strong class="text-teal-600" data-lang-vi="Giúp đỡ (Tasukeru):" data-lang-jp="助ける (Tasukeru):"></strong>
                                    <ul class="list-none space-y-2 mt-2 pl-5">
                                        <li class="flex"><span class="mr-2 text-teal-400">▸</span><div data-lang-vi="<strong>Kỹ năng coaching và mentoring:</strong> Trang bị cho quản lý các kỹ năng hướng dẫn, hỗ trợ nhân viên phát triển, giải quyết vấn đề và vượt qua khó khăn."></div></li>
                                        <li class="flex"><span class="mr-2 text-teal-400">▸</span><div data-lang-vi="<strong>Nhận diện và đáp ứng nhu cầu hỗ trợ:</strong> Hướng dẫn quản lý cách nhận biết khi nào nhân viên cần giúp đỡ và chủ động đưa ra sự hỗ trợ phù hợp (ví dụ: cung cấp thêm nguồn lực, đào tạo bổ sung, điều chỉnh khối lượng công việc)."></div></li>
                                        <li class="flex"><span class="mr-2 text-teal-400">▸</span><div data-lang-vi="<strong>Tạo điều kiện để nhân viên học hỏi lẫn nhau:</strong> Khuyến khích sự hợp tác và chia sẻ kiến thức kinh nghiệm giữa các thành viên trong nhóm."></div></li>
                                    </ul>
                                </div>
                                <div>
                                    <strong class="text-teal-600" data-lang-vi="Chỉ thị rõ ràng (Shiji Suru):" data-lang-jp="指示する (Shiji Suru):"></strong>
                                    <ul class="list-none space-y-2 mt-2 pl-5">
                                        <li class="flex"><span class="mr-2 text-teal-400">▸</span><div data-lang-vi="<strong>Kỹ năng giao tiếp hiệu quả:</strong> Đào tạo về cách truyền đạt thông tin, yêu cầu, mục tiêu một cách rõ ràng, cụ thể, dễ hiểu và có thể đo lường được."></div></li>
                                        <li class="flex"><span class="mr-2 text-teal-400">▸</span><div data-lang-vi="<strong>Kiểm tra sự hiểu biết:</strong> Hướng dẫn quản lý cách kiểm tra xem nhân viên đã hiểu đúng chỉ thị hay chưa (ví dụ: yêu cầu nhân viên nhắc lại hoặc giải thích theo cách hiểu của họ)."></div></li>
                                        <li class="flex"><span class="mr-2 text-teal-400">▸</span><div data-lang-vi="<strong>Cung cấp bối cảnh và lý do:</strong> Giải thích tại sao công việc đó quan trọng và đóng góp vào mục tiêu chung của công ty, giúp nhân viên có thêm động lực thực hiện."></div></li>
                                    </ul>
                                </div>
                            </div>
                            <h4 class="text-teal-700" data-lang-vi="B. Xây dựng Văn hóa O-Hi-Ta-Shi" data-lang-jp="B. おひたし文化の構築"></h4>
                             <ul class="list-none space-y-2 mt-4 text-slate-700">
                                <li class="flex"><span class="mr-2 text-teal-500">▸</span><div data-lang-vi="<strong>Phản hồi 360 độ:</strong> Triển khai hệ thống phản hồi đa chiều để nhân viên có thể đưa ra nhận xét về phong cách quản lý của cấp trên."></div></li>
                                <li class="flex"><span class="mr-2 text-teal-500">▸</span><div data-lang-vi="<strong>Đánh giá hiệu quả quản lý dựa trên O-Hi-Ta-Shi:</strong> Đưa các yếu tố O-Hi-Ta-Shi vào tiêu chí đánh giá hiệu quả làm việc của quản lý."></div></li>
                                <li class="flex"><span class="mr-2 text-teal-500">▸</span><div data-lang-vi="<strong>Chia sẻ những câu chuyện quản lý tốt:</strong> chia sẽ những câu chuyện về các nhà quản lý đã áp dụng thành công O-Hi-Ta-Shi và tạo ra những tác động tích cực đến đội nhóm."></div></li>
                            </ul>
                        </div>

                        <div class="p-6 rounded-lg bg-blue-50 border-l-4 border-blue-400">
                            <h3 class="flex items-center gap-3 text-2xl font-bold text-blue-800" data-lang-vi="III. Thúc đẩy và duy trì KAKU-REN-BOU" data-lang-jp="III. 確連報の推進と維持"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" /></svg></h3>
                            <h4 class="text-blue-700" data-lang-vi="A. Đào tạo và Nâng cao Nhận thức về Kaku-Ren-Bou" data-lang-jp="A. 確連報に関する研修と意識向上"></h4>
                             <div class="mt-4 text-slate-700 space-y-4">
                                <div>
                                    <strong class="text-blue-600" data-lang-vi="Xác nhận (Kakunin):" data-lang-jp="確認 (Kakunin):"></strong>
                                    <ul class="list-none space-y-2 mt-2 pl-5">
                                        <li class="flex"><span class="mr-2 text-blue-400">▸</span><div data-lang-vi="<strong>Tầm quan trọng của xác nhận:</strong> Giải thích hậu quả của việc thiếu xác nhận (sai sót, lãng phí thời gian và nguồn lực)."></div></li>
                                        <li class="flex"><span class="mr-2 text-blue-400">▸</span><div data-lang-vi="<strong>Hướng dẫn các phương pháp xác nhận:</strong> Dạy nhân viên cách xác nhận thông tin một cách hiệu quả (ví dụ: nhắc lại yêu cầu, viết email xác nhận, sử dụng checklist)."></div></li>
                                        <li class="flex"><span class="mr-2 text-blue-400">▸</span><div data-lang-vi="<strong>Thực hành tình huống xác nhận:</strong> Tổ chức các buổi thực hành để nhân viên làm quen với việc chủ động xác nhận thông tin trong các tình huống khác nhau."></div></li>
                                    </ul>
                                </div>
                                <div>
                                    <strong class="text-blue-600" data-lang-vi="Liên lạc (Renraku):" data-lang-jp="連絡 (Renraku):"></strong>
                                    <ul class="list-none space-y-2 mt-2 pl-5">
                                         <li class="flex"><span class="mr-2 text-blue-400">▸</span><div data-lang-vi="<strong>Thiết lập tần suất liên lạc phù hợp:</strong> Xác định tần suất liên lạc cần thiết cho từng loại công việc và dự án để đảm bảo mọi người luôn được cập nhật thông tin."></div></li>
                                         <li class="flex"><span class="mr-2 text-blue-400">▸</span><div data-lang-vi="<strong>Sử dụng các công cụ hỗ trợ liên lạc hiệu quả:</strong> Hướng dẫn cách sử dụng các công cụ như Slack, Microsoft Teams, v.v. một cách hiệu quả để trao đổi thông tin nhanh chóng và có hệ thống."></div></li>
                                    </ul>
                                </div>
                                <div>
                                    <strong class="text-blue-600" data-lang-vi="Báo cáo (Hokoku):" data-lang-jp="報告 (Hokoku):"></strong>
                                    <ul class="list-none space-y-2 mt-2 pl-5">
                                        <li class="flex"><span class="mr-2 text-blue-400">▸</span><div data-lang-vi="<strong>Kiểm tra kỹ lưỡng trước khi báo cáo:</strong> Nhắc nhở nhân viên kiểm tra lại thông tin nhiều lần trước khi báo cáo để đảm bảo tính chính xác cao nhất."></div></li>
                                        <li class="flex"><span class="mr-2 text-blue-400">▸</span><div data-lang-vi="<strong>Báo cáo dựa trên dữ liệu thực tế:</strong> Khuyến khích việc sử dụng dữ liệu và bằng chứng cụ thể trong báo cáo."></div></li>
                                    </ul>
                                </div>
                            </div>
                             <h4 class="text-blue-700" data-lang-vi="B. Xây dựng Văn hóa Kaku-Ren-Bou" data-lang-jp="B. 確連報文化の構築"></h4>
                            <ul class="list-none space-y-2 mt-4 text-slate-700">
                               <li class="flex"><span class="mr-2 text-blue-500">▸</span><div data-lang-vi="<strong>Biến xác nhận thành một bước không thể thiếu:</strong> Tích hợp việc xác nhận vào quy trình làm việc chuẩn của công ty. Ví dụ: Yêu cầu xác nhận bằng văn bản cho mọi chỉ thị quan trọng."></div></li>
                               <li class="flex"><span class="mr-2 text-blue-500">▸</span><div data-lang-vi="<strong>Khuyến khích tư duy &quot;kiểm tra kép&quot;:</strong> Tạo thói quen kiểm tra lại công việc của bản thân và đồng nghiệp (khi cần thiết) để phát hiện và ngăn ngừa sai sót."></div></li>
                               <li class="flex"><span class="mr-2 text-blue-500">▸</span><div data-lang-vi="<strong>Đánh giá hiệu quả công việc dựa trên tính chính xác:</strong> Đưa yếu tố đảm bảo tính chính xác vào tiêu chí đánh giá hiệu quả công việc của nhân viên."></div></li>
                            </ul>
                        </div>

                        <div class="p-6 rounded-lg bg-green-50 border-l-4 border-green-400">
                            <h3 class="flex items-center gap-3 text-2xl font-bold text-green-800" data-lang-vi="IV. Hành động" data-lang-jp="IV. 行動計画"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg></h3>
                            <ul class="list-none space-y-2 mt-4 text-slate-700">
                                <li class="flex"><span class="mr-2 text-green-500">▸</span><div data-lang-vi="<strong>Tập trung đào tạo đội ngũ Leader thuần thục khái niệm O-Hi-Ta-Shi:</strong> (1-2 lần/ tháng). Tổ chức Workshop (hội thảo) áp dụng vào thực tế, phát triển kỹ năng, Leader phải thay đổi trước để tạo ra môi trường hiệu quả, sau đó trang bị và hỗ trợ để nhân viên phát huy tinh thần Hou-Ren-Sou." data-lang-jp="<strong>リーダーチームがおひたしの概念を習熟するための研修に集中する：</strong>（月1〜2回）。実践的なワークショップを開催し、スキルを向上させ、リーダーがまず変化して効果的な環境を作り出し、その後、従業員が報連相の精神を発揮できるように支援する。"></div></li>
                                <li class="flex"><span class="mr-2 text-green-500">▸</span><div data-lang-vi="<strong>Thiết kế Poster, Infographic để treo/đăng tải tại văn phòng và các kênh nội bộ:</strong> Tuyên truyền, tạo động lực, thói quen hành động, hiệu quả, hướng tới định hình văn hóa công ty." data-lang-jp="<strong>ポスターやインフォグラフィックをデザインし、オフィスや社内チャネルに掲示・投稿する：</strong>会社の文化を形成するために、宣伝し、動機付け、行動習慣、効率性を促進する。"></div></li>
                                <li class="flex"><span class="mr-2 text-green-500">▸</span><div data-lang-vi="<strong>Sử dụng các công cụ trực quan hóa:</strong> Tạo infographic, sơ đồ quy trình để minh họa cách các khái niệm này hoạt động và tương tác với nhau." data-lang-jp="<strong>視覚化ツールの使用：</strong>これらの概念がどのように機能し、相互作用するかを説明するために、インフォグラフィックやプロセス図を作成する。"></div></li>
                                <li class="flex"><span class="mr-2 text-green-500">▸</span><div data-lang-vi="<strong>Soạn thảo các mẫu biểu cơ bản (Mẫu báo cáo, Mẫu biên bản họp, Kế hoạch, …):</strong> Thống nhất cách làm giữa các nhóm, liên lạc, báo cáo hiệu quả hơn." data-lang-jp="<strong>基本的なテンプレート（報告書、議事録、計画書など）を作成する：</strong>グループ間の作業方法を統一し、より効果的な連絡と報告を行う。"></div></li>
                                <li class="flex"><span class="mr-2 text-green-500">▸</span><div data-lang-vi="<strong>Xây dựng Cẩm nang về các khái niệm Hou-ren-Sou, O-Hi-Ta-Shi, Kaku-Ren-Bou.</strong>" data-lang-jp="<strong>報連相、おひたし、確連報の概念に関するハンドブックを作成する。</strong>"></div></li>
                                <li class="flex"><span class="mr-2 text-green-500">▸</span><div data-lang-vi="<strong>Khởi động chương trình &quot;Open-door meetings&quot;:</strong> Mỗi quản lý dành ra 1-2 giờ/tuần để nhân viên có thể đến thảo luận mọi vấn đề một cách thoải mái mà không sợ đánh giá, tạo cho nhân viên kỹ năng Soudan (bàn bạc) để giải quyết vấn đề, tự tin trong giao tiếp,…" data-lang-jp="<strong>「オープンドアミーティング」プログラムの開始：</strong>各管理者は週に1〜2時間を確保し、従業員が評価を恐れることなくあらゆる問題を自由に議論できるようにし、問題解決のための相談スキルを身につけ、コミュニケーションに自信を持てるようにする。"></div></li>
                                <li class="flex"><span class="mr-2 text-green-500">▸</span><div data-lang-vi="<strong>Tạo ra quy định mới:</strong> Mọi chỉ thị/yêu cầu công việc được giao qua lời nói, email hoặc chat đều cần một thông tin xác nhận lại từ người nhận." data-lang-jp="<strong>新しい規則の作成：</strong>口頭、メール、チャットで伝えられたすべての指示・業務要求は、受け手からの確認情報が必要となる。"></div></li>
                                <li class="flex"><span class="mr-2 text-green-500">▸</span><div data-lang-vi="<strong>Hướng dẫn nhân viên sử dụng công cụ, phần mềm hỗ trợ quản lý công việc.</strong>" data-lang-jp="<strong>業務管理を支援するツールやソフトウェアの使用方法を従業員に指導する。</strong>"></div></li>
                                <li class="flex"><span class="mr-2 text-green-500">▸</span><div data-lang-vi="<strong>Khảo sát định kỳ, đánh giá và điều chỉnh:</strong> (1-2 tháng 1 lần). Thu thập ý kiến phản hồi từ nhân viên để đánh giá mức độ hiệu quả của các phương pháp đang áp dụng và tìm ra những điểm cần cải thiện. Biểu dương những cá nhân/nhóm thực hiện tốt." data-lang-jp="<strong>定期的調査、評価、調整：</strong>（1〜2ヶ月に1回）。従業員からのフィードバックを収集し、適用されている方法の有効性を評価し、改善点を特定する。優れた業績を上げた個人・グループを表彰する。"></div></li>
                            </ul>
                        </div>
                    </div>
                 </div>
            </div>
            
            <!-- Tab Content: Quiz -->
            <div id="tab-content-quiz" class="tab-pane pt-8 relative">
                 <h2 class="tab-main-title flex items-center justify-center gap-4"
                    data-lang-vi='TRẮC NGHIỆM KIẾN THỨC <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-blue-800" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>'
                    data-lang-jp='知識クイズ <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-blue-800" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>'>
                 </h2>
                 <button onclick="toggleSpeech('tab-content-quiz')" class="speaker-button" data-tab-id="tab-content-quiz" aria-label="Đọc nội dung">
                    <svg class="w-6 h-6 speaker-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"></path></svg>
                    <svg class="w-6 h-6 stop-icon hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M9 9.563C9 9.253 9.253 9 9.563 9h4.874c.31 0 .563.253.563.563v4.874c0 .31-.253.563-.563.563H9.563C9.253 15 9 14.747 9 14.437V9.563z"></path></svg>
                </button>
                <div class="content-section max-w-7xl mx-auto">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-2">
                            <!-- Quiz Setup View -->
                            <div id="quiz-setup" class="quiz-view active">
                                <h3 class="text-2xl font-bold mb-4" data-lang-vi="Bắt đầu làm bài" data-lang-jp="クイズを始める"></h3>
                                <div class="space-y-4">
                                    <div>
                                        <label for="player-name" class="block font-semibold mb-2" data-lang-vi="Nhập tên của bạn:" data-lang-jp="名前を入力してください："></label>
                                        <input type="text" id="player-name" class="w-full p-2 border border-slate-300 rounded-lg" placeholder="Tên người làm bài...">
                                    </div>
                                    <div>
                                        <label for="quiz-set-select" class="block font-semibold mb-2" data-lang-vi="Chọn bộ đề:" data-lang-jp="クイズセットを選択："></label>
                                        <select id="quiz-set-select" class="w-full p-2 border border-slate-300 rounded-lg bg-white">
                                            <!-- Options will be populated by JS -->
                                        </select>
                                    </div>
                                    <button id="start-quiz-btn" class="gemini-button w-full">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z" clip-rule="evenodd" /></svg>
                                        <span data-lang-vi="Bắt đầu" data-lang-jp="開始"></span>
                                    </button>
                                </div>
                            </div>
                            <!-- Quiz Container View -->
                            <div id="quiz-container-view" class="quiz-view">
                                <h3 id="quiz-title" class="text-2xl font-bold mb-4"></h3>
                                <div id="quiz-container"></div>
                                <button id="submit-quiz-btn" class="gemini-button w-full mt-6">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                                    <span data-lang-vi="Nộp bài" data-lang-jp="提出"></span>
                                </button>
                            </div>
                            <!-- Quiz Results View -->
                            <div id="quiz-results-view" class="quiz-view text-center">
                                <h3 class="text-2xl font-bold mb-4" data-lang-vi="Kết quả" data-lang-jp="結果"></h3>
                                <p class="text-lg" data-lang-vi="Chúc mừng" data-lang-jp="おめでとうございます、"><span id="result-player-name" class="font-bold"></span>!</p>
                                <p id="quiz-score" class="text-4xl font-bold my-4"></p>
                                <p id="quiz-feedback" class="text-slate-600 mb-6"></p>
                                <button id="play-again-btn" class="gemini-button">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" /></svg>
                                    <span data-lang-vi="Làm lại" data-lang-jp="もう一度"></span>
                                </button>
                            </div>
                        </div>

                        <!-- Leaderboard -->
                        <div class="lg:col-span-1">
                             <h3 class="text-2xl font-bold mb-4 text-center" data-lang-vi="Bảng xếp hạng" data-lang-jp="リーダーボード"></h3>
                             <div class="table-wrapper">
                                 <table>
                                     <thead>
                                         <tr>
                                             <th data-lang-vi="Hạng" data-lang-jp="ランク"></th>
                                             <th data-lang-vi="Tên" data-lang-jp="名前"></th>
                                             <th data-lang-vi="Điểm" data-lang-jp="スコア"></th>
                                             <th data-lang-vi="Bộ đề" data-lang-jp="セット"></th>
                                         </tr>
                                     </thead>
                                     <tbody id="leaderboard-body">
                                         <!-- Leaderboard data will be populated by JS -->
                                     </tbody>
                                 </table>
                             </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab Content: Feedback -->
            <div id="tab-content-feedback" class="tab-pane pt-8 relative">
                 <h2 class="tab-main-title flex items-center justify-center gap-4"
                    data-lang-vi='Ý KIẾN ĐÓNG GÓP <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-blue-800" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" /></svg>'
                    data-lang-jp='ご意見 <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-blue-800" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" /></svg>'>
                 </h2>
                 <button onclick="toggleSpeech('tab-content-feedback')" class="speaker-button" data-tab-id="tab-content-feedback" aria-label="Đọc nội dung">
                    <svg class="w-6 h-6 speaker-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"></path></svg>
                    <svg class="w-6 h-6 stop-icon hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M9 9.563C9 9.253 9.253 9 9.563 9h4.874c.31 0 .563.253.563.563v4.874c0 .31-.253.563-.563.563H9.563C9.253 15 9 14.747 9 14.437V9.563z"></path></svg>
                </button>
                <div class="content-section max-w-4xl mx-auto">
                    <p class="text-center text-lg mb-6" data-lang-vi="Chúng tôi rất trân trọng ý kiến của bạn để cải thiện cẩm nang này. Vui lòng để lại góp ý của bạn vào ô bên dưới." data-lang-jp="このハンドブックを改善するため、皆様のご意見をお待ちしております。以下のボックスにご意見をご記入ください。"></p>
                    <textarea id="feedback-input" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500" rows="8" placeholder="Nhập ý kiến của bạn..."></textarea>
                    <div class="text-center mt-6">
                        <button onclick="submitFeedback()" class="gemini-button" data-lang-vi="Gửi Đóng Góp" data-lang-jp="意見を送る"></button>
                        <p id="feedback-thanks" class="text-green-600 font-semibold mt-4 hidden" data-lang-vi="Cảm ơn bạn đã đóng góp ý kiến!" data-lang-jp="ご意見ありがとうございます！"></p>
                    </div>
                </div>
            </div>

            <!-- Tab Content: Calendar -->
            <div id="tab-content-calendar" class="tab-pane pt-8 relative">
                 <h2 class="tab-main-title flex items-center justify-center gap-4"
                    data-lang-vi='LỊCH CÔNG VIỆC <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-blue-800" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>'
                    data-lang-jp='作業カレンダー <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-blue-800" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>'>
                 </h2>
                 <div class="content-section">
                    <div class="flex flex-col sm:flex-row justify-center items-center gap-4 mb-8">
                        <div class="flex items-center gap-2">
                            <button onclick="changeYear(-1)" class="gemini-button p-2">&lt;</button>
                            <span id="current-year" class="text-2xl font-bold"></span>
                            <button onclick="changeYear(1)" class="gemini-button p-2">&gt;</button>
                        </div>
                        <div class="flex items-center gap-2">
                             <input type="number" id="year-input" class="p-2 border border-slate-300 rounded-lg w-24 text-center" placeholder="Năm">
                             <button onclick="jumpToYear()" class="gemini-button" data-lang-vi="Đi đến" data-lang-jp="ジャンプ"></button>
                        </div>
                    </div>
                    
                    <div class="flex flex-col lg:flex-row lg:gap-8">
                        <div class="w-full lg:w-2/3">
                            <div id="calendar-container">
                                <!-- Calendar months will be generated here by JS -->
                            </div>
                        </div>
                        <div class="w-full lg:w-1/3 mt-12 lg:mt-0">
                            <!-- Note Summary Table -->
                            <div id="note-summary-section">
                                <h3 class="text-2xl font-bold text-center mb-6" data-lang-vi="Tổng Hợp Ghi Chú" data-lang-jp="ノートの概要"></h3>
                                <div class="table-wrapper">
                                    <table class="w-full">
                                        <thead>
                                            <tr>
                                                <th class="w-16" data-lang-vi="STT" data-lang-jp="番号"></th>
                                                <th class="w-48" data-lang-vi="Ngày" data-lang-jp="日付"></th>
                                                <th data-lang-vi="Nội dung" data-lang-jp="内容"></th>
                                            </tr>
                                        </thead>
                                        <tbody id="note-summary-body">
                                            <!-- Note summary rows will be generated here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                 </div>
            </div>
        </div>
    </main>
    
    <!-- Note Modal -->
    <div id="note-modal">
        <div class="modal-content">
            <h3 id="modal-title" class="text-xl font-bold mb-4"></h3>
            <textarea id="note-textarea" class="w-full p-2 border border-slate-300 rounded-lg" rows="6"></textarea>
            <div class="flex justify-end gap-4 mt-4">
                <button onclick="closeNoteModal()" class="gemini-button bg-slate-500 hover:bg-slate-600" data-lang-vi="Đóng" data-lang-jp="閉じる"></button>
                <button onclick="saveNote()" class="gemini-button" data-lang-vi="Lưu" data-lang-jp="保存"></button>
            </div>
        </div>
    </div>

    <button id="back-to-top" title="Go to top" class="fixed-button">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7" />
        </svg>
    </button>

    <script type="module">
        // Firebase initialization
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, serverTimestamp, doc, getDoc, setDoc, onSnapshot, query, orderBy, limit } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        onAuthStateChanged(auth, async (user) => {
            if (!user) {
                await initializeAuth();
            } else {
                // User is signed in, now we can load calendar data
                renderCalendar(currentYear);
            }
        });

        async function initializeAuth() {
             try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
             } catch (error) {
                console.error("Authentication failed:", error);
             }
        }
        
        // --- UI & TTS LOGIC ---
        let currentLang = 'vi';
        let voices = [];

        function populateVoiceList() {
            if(typeof speechSynthesis === 'undefined') return;
            voices = speechSynthesis.getVoices();
        }
        populateVoiceList();
        if (typeof speechSynthesis !== 'undefined' && speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = populateVoiceList;
        }

        window.toggleSpeech = function(tabId) {
            const button = document.querySelector(`.speaker-button[data-tab-id="${tabId}"]`);
            if (!button) return;
            const speakerIcon = button.querySelector('.speaker-icon');
            const stopIcon = button.querySelector('.stop-icon');
            
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
                return;
            }

            const contentEl = document.getElementById(tabId);
            if (!contentEl) return;

            resetAllSpeakerIcons();

            let textToSpeak = '';
            // Get text only, exclude SVG content for cleaner speech
            const elementsToRead = contentEl.querySelectorAll('h1, h2, h3, h4, p, li, th, td, label, strong, span');
            elementsToRead.forEach(el => {
                if (!el.closest('.speaker-button')) {
                    // Clone the node and remove SVG to get only text
                    const clone = el.cloneNode(true);
                    clone.querySelectorAll('svg').forEach(svg => svg.remove());
                    textToSpeak += clone.innerText + '. ';
                }
            });

            if (textToSpeak.trim() === '') return;

            const utterance = new SpeechSynthesisUtterance(textToSpeak);
            const targetLang = currentLang === 'vi' ? 'vi-VN' : 'ja-JP';
            const voice = voices.find(v => v.lang === targetLang) || voices.find(v => v.lang.startsWith(currentLang));
            if (voice) utterance.voice = voice;
            utterance.lang = targetLang;

            utterance.onend = function() {
                speakerIcon.classList.remove('hidden');
                stopIcon.classList.add('hidden');
                button.classList.remove('speaking');
            };

            speechSynthesis.speak(utterance);
            
            speakerIcon.classList.add('hidden');
            stopIcon.classList.remove('hidden');
            button.classList.add('speaking');
        }

        function resetAllSpeakerIcons() {
            document.querySelectorAll('.speaker-button').forEach(btn => {
                btn.classList.remove('speaking');
                btn.querySelector('.speaker-icon').classList.remove('hidden');
                btn.querySelector('.stop-icon').classList.add('hidden');
            });
        }

        window.switchTab = function(tabName) {
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
                resetAllSpeakerIcons();
            }

            document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(`tab-content-${tabName}`).classList.add('active');
            document.getElementById(`tab-btn-${tabName}`).classList.add('active');
        }

        window.switchLanguage = function(lang) {
            currentLang = lang;
            document.querySelectorAll('[data-lang-vi]').forEach(el => {
                const text = el.getAttribute(`data-lang-${lang}`);
                if (text) {
                    el.innerHTML = text;
                }
            });

            document.getElementById('lang-vi').classList.toggle('active', lang === 'vi');
            document.getElementById('lang-jp').classList.toggle('active', lang === 'jp');
            
            renderCalendar(currentYear); // Re-render calendar for language change

            const aiInput = document.getElementById('ai-input');
            if(aiInput) {
                aiInput.placeholder = lang === 'vi' ? "Nhập tình huống..." : "状況を入力...";
            }
        }

        // --- AI TOOL FUNCTIONS ---
        async function callGeminiAPI(prompt, resultBox, buttonSelector) {
            const loadingText = currentLang === 'vi' ? 'AI đang xử lý...' : 'AIが処理中です...';
            const errorText = currentLang === 'vi' ? 'Đã có lỗi xảy ra.' : 'エラーが発生しました。';

            resultBox.innerHTML = `<div class="flex justify-center items-center h-full"><div class="loader"></div><p class="ml-3 text-slate-500">${loadingText}</p></div>`;
            document.querySelectorAll(buttonSelector).forEach(btn => btn.disabled = true);

            const payload = { contents: [{ role: "user", parts: [{ text: prompt }] }] };
            const apiKey = ""; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                if (!response.ok) throw new Error(`API request failed`);
                const jsonResponse = await response.json();
                if (jsonResponse?.candidates?.[0]?.content?.parts?.[0]?.text) {
                   resultBox.innerHTML = jsonResponse.candidates[0].content.parts[0].text.replace(/\n/g, '<br>');
                } else {
                   throw new Error("Invalid response from API.");
                }
            } catch (error) {
                console.error(`Gemini API Error:`, error.message);
                resultBox.innerHTML = `<p class="text-red-500 text-center">${errorText}</p>`;
            } finally {
                document.querySelectorAll(buttonSelector).forEach(btn => btn.disabled = false);
            }
        }

        window.runAITool = async function(tool) {
            const input = document.getElementById('ai-input').value.trim();
            if (!input) {
                alert(currentLang === 'vi' ? 'Vui lòng nhập nội dung.' : '内容を入力してください。');
                return;
            }
            
            let prompt = '';
            const userInputText = `Nội dung từ người dùng: "${input}"`;

            switch(tool) {
                case 'draft': prompt = `Soạn thảo một thông điệp (email/tin nhắn) theo nguyên tắc Hou-Ren-Sou. ${userInputText}`; break;
                case 'analyze': prompt = `Phân tích nội dung sau dưới góc độ Hou-Ren-Sou, chỉ ra điểm tốt và cần cải thiện. ${userInputText}`; break;
                case 'soudan': prompt = `Giúp người dùng 'Soudan' (Bàn bạc) vấn đề sau: 1. Tóm tắt vấn đề. 2. Đưa ra 2-3 phương án. 3. Gợi ý cách bắt đầu cuộc trò chuyện. ${userInputText}`; break;
                case 'summarize': prompt = `Tóm tắt nội dung sau thành các gạch đầu dòng ngắn gọn. ${userInputText}`; break;
                case 'scenario': prompt = `Tạo kịch bản hội thoại ngắn (role-play) giữa nhân viên và quản lý để thực hành Hou-Ren-Sou. ${userInputText}`; break;
            }
            
            await callGeminiAPI(prompt, document.getElementById('ai-result-box'), '#ai-tools button');
        }

        window.clearAIResult = function() {
            const resultBox = document.getElementById('ai-result-box');
            const inputBox = document.getElementById('ai-input');
            const placeholderTextVI = "Kết quả từ AI sẽ xuất hiện ở đây.";
            const placeholderTextJP = "AIからの結果はここに表示されます。";
            resultBox.innerHTML = `<p class="text-slate-500 text-center" data-lang-vi="${placeholderTextVI}" data-lang-jp="${placeholderTextJP}">${currentLang === 'vi' ? placeholderTextVI : placeholderTextJP}</p>`;
            inputBox.value = '';
        }
        
        // --- QUIZ LOGIC ---
        let currentQuizSetIndex = 0;
        let currentPlayerName = '';
        
        const allQuizData = [{
            name: 'Đề tổng hợp kiến thức giao tiếp',
            questions: [
                // Hou-Ren-Sou Questions (5)
                { question: "Chữ 'Ren' (連) trong Hou-Ren-Sou (報連相) có ý nghĩa cốt lõi là gì?", options: ["Liên lạc: Chủ động chia sẻ thông tin, dữ kiện", "Báo cáo: Trình bày kết quả công việc", "Bàn bạc: Xin ý kiến khi gặp khó khăn", "Lắng nghe: Tiếp thu chỉ thị từ cấp trên"], answer: "Liên lạc: Chủ động chia sẻ thông tin, dữ kiện" },
                { question: "Khi nào một nhân viên nên thực hiện 'Soudan' (相談)?", options: ["Khi đã hoàn thành xuất sắc công việc", "Khi gặp vướng mắc hoặc có nhiều phương án lựa chọn", "Khi muốn thông báo một sự thật đơn thuần như lịch họp", "Ngay sau khi nhận được chỉ thị mới"], answer: "Khi gặp vướng mắc hoặc có nhiều phương án lựa chọn" },
                { question: "Hành động nào sau đây là một ví dụ điển hình của 'Hokoku' (報告)?", options: ["Gửi email cho cả nhóm thông báo dời lịch họp", "Hỏi ý kiến đồng nghiệp về cách giải quyết một vấn đề khó", "Gửi báo cáo tiến độ dự án cuối ngày cho quản lý", "Xác nhận lại yêu cầu công việc với cấp trên"], answer: "Gửi báo cáo tiến độ dự án cuối ngày cho quản lý" },
                { question: "Mục đích chính của việc áp dụng Hou-Ren-Sou trong một tổ chức là gì?", options: ["Để nhân viên có thể tự do sáng tạo", "Để đảm bảo thông tin được lưu chuyển thông suốt từ dưới lên, giúp quản lý nắm tình hình", "Để giảm số lượng các cuộc họp không cần thiết", "Để tạo ra một môi trường làm việc ít quy tắc hơn"], answer: "Để đảm bảo thông tin được lưu chuyển thông suốt từ dưới lên, giúp quản lý nắm tình hình" },
                { question: "Thiếu sót trong 'Renraku' (連絡) có thể dẫn đến hậu quả trực tiếp nào?", options: ["Quản lý không hài lòng về kết quả công việc", "Đồng nghiệp không nắm được thông tin thay đổi, dẫn đến phối hợp sai lệch", "Nhân viên cảm thấy không được tôn trọng", "Dự án không có định hướng rõ ràng"], answer: "Đồng nghiệp không nắm được thông tin thay đổi, dẫn đến phối hợp sai lệch" },
                
                // O-Hi-Ta-Shi Questions (5)
                { question: "Nguyên tắc O-Hi-Ta-Shi (おひたし) là trách nhiệm của đối tượng nào trong giao tiếp công sở?", options: ["Toàn thể nhân viên", "Cấp quản lý và Leader", "Nhân viên mới", "Bộ phận nhân sự"], answer: "Cấp quản lý và Leader" },
                { question: "Khi nhân viên báo cáo một sai sót, hành động 'Okoranai' (怒らない) của người quản lý là gì?", options: ["Lập tức tìm cách giải quyết vấn đề", "Yêu cầu nhân viên giải trình chi tiết", "Giữ bình tĩnh, không tức giận hay chỉ trích cá nhân", "Phớt lờ vấn đề để tránh căng thẳng"], answer: "Giữ bình tĩnh, không tức giận hay chỉ trích cá nhân" },
                { question: "Một quản lý nói: 'Ý tưởng của em có vẻ không khả thi' ngay khi nhân viên vừa trình bày. Hành động này đi ngược lại với chữ nào trong O-Hi-Ta-Shi?", options: ["O (Okoranai - Không tức giận)", "Hi (Hitei shinai - Không phủ nhận)", "Ta (Tasukeru - Giúp đỡ)", "Shi (Shiji suru - Chỉ thị)"], answer: "Hi (Hitei shinai - Không phủ nhận)" },
                { question: "Hành động nào thể hiện rõ nhất tinh thần 'Tasukeru' (助ける) của người quản lý?", options: ["'Việc này em tự giải quyết đi.'", "'Tại sao lại để xảy ra sai sót này?'", "'Em có cần anh hỗ trợ thêm nguồn lực hay thông tin gì không?'", "'Hãy báo cáo lại cho anh khi có kết quả.'"], answer: "'Em có cần anh hỗ trợ thêm nguồn lực hay thông tin gì không?'" },
                { question: "Tại sao O-Hi-Ta-Shi được coi là 'chất xúc tác' cho Hou-Ren-Sou?", options: ["Vì nó thay thế hoàn toàn cho Hou-Ren-Sou", "Vì nó tạo ra một môi trường an toàn để nhân viên dám báo cáo và xin ý kiến", "Vì nó giúp báo cáo được thực hiện nhanh hơn", "Vì nó là quy trình bắt buộc của công ty"], answer: "Vì nó tạo ra một môi trường an toàn để nhân viên dám báo cáo và xin ý kiến" },

                // Kaku-Ren-Bou & Comparison Questions (5)
                { question: "Yếu tố 'Kaku' (確認) trong Kaku-Ren-Bou nhấn mạnh điều gì nhất?", options: ["Tốc độ báo cáo phải nhanh", "Sự chủ động xác nhận thông tin từ cả hai phía để tránh hiểu lầm", "Chỉ cần cấp trên xác nhận lại thông tin", "Việc báo cáo phải có bằng chứng rõ ràng"], answer: "Sự chủ động xác nhận thông tin từ cả hai phía để tránh hiểu lầm" },
                { question: "So với Hou-Ren-Sou, Kaku-Ren-Bou tập trung hơn vào việc gì?", options: ["Tạo môi trường làm việc thoải mái", "Đảm bảo dòng chảy thông tin từ dưới lên", "Chống nhiễu thông tin và đảm bảo sự chính xác tuyệt đối", "Khuyến khích nhân viên tự quyết định"], answer: "Chống nhiễu thông tin và đảm bảo sự chính xác tuyệt đối" },
                { question: "Trong mô hình giao tiếp toàn diện, nguyên tắc nào được ví như 'hệ thần kinh' đảm bảo mệnh lệnh được truyền đi chính xác?", options: ["Hou-Ren-Sou", "O-Hi-Ta-Shi", "Kaku-Ren-Bou", "Cả ba đều như nhau"], answer: "Kaku-Ren-Bou" },
                { question: "Hành động nào sau đây là một ví dụ của Kaku-Ren-Bou?", options: ["Nhân viên gửi email báo cáo công việc đã hoàn thành.", "Quản lý thông báo lịch họp mới cho cả nhóm.", "Nhân viên gửi lại email: 'Em xin xác nhận lại deadline cho công việc X là 5 giờ chiều nay, đúng không ạ?'", "Nhân viên hỏi ý kiến đồng nghiệp về một vấn đề."], answer: "Nhân viên gửi lại email: 'Em xin xác nhận lại deadline cho công việc X là 5 giờ chiều nay, đúng không ạ?'" },
                { question: "Việc thiết lập chương trình 'Open-door meetings' (họp cửa mở) nhằm mục đích chính là để thúc đẩy kỹ năng nào?", options: ["Hokoku (Báo cáo) một cách hiệu quả hơn", "Renraku (Liên lạc) nhanh chóng hơn", "Soudan (Bàn bạc) một cách cởi mở và không e ngại", "Kakunin (Xác nhận) thông tin chính xác hơn"], answer: "Soudan (Bàn bạc) một cách cởi mở và không e ngại" }
            ]
        }]
        
        function populateQuizSets() {
            const select = document.getElementById('quiz-set-select');
            select.innerHTML = '';
            allQuizData.forEach((set, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = set.name;
                select.appendChild(option);
            });
        }

        function switchQuizView(viewId) {
            document.querySelectorAll('.quiz-view').forEach(view => view.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
        }
        
        function loadQuiz(setIndex) {
            const quizContainer = document.getElementById('quiz-container');
            const quizTitle = document.getElementById('quiz-title');
            quizContainer.innerHTML = '';
            const quizData = allQuizData[setIndex].questions;
            quizTitle.textContent = allQuizData[setIndex].name;

            quizData.forEach((item, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'quiz-question';
                
                let optionsHtml = item.options.map((option, i) => `
                    <div>
                        <input type="radio" name="question${index}" id="q${index}o${i}" value="${option}" class="hidden">
                        <label for="q${index}o${i}">${option}</label>
                    </div>
                `).join('');

                questionDiv.innerHTML = `
                    <p class="font-semibold text-lg mb-4">${index + 1}. ${item.question}</p>
                    <div class="quiz-options space-y-2">${optionsHtml}</div>
                `;
                quizContainer.appendChild(questionDiv);
            });
        }
        
        async function submitQuiz() {
            const quizData = allQuizData[currentQuizSetIndex].questions;
            let score = 0;
            quizData.forEach((item, index) => {
                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);
                if (selectedOption && selectedOption.value === item.answer) {
                    score++;
                }
            });
            
            document.getElementById('result-player-name').textContent = currentPlayerName;
            document.getElementById('quiz-score').textContent = `${score} / ${quizData.length}`;
            
            const feedbackEl = document.getElementById('quiz-feedback');
            if (score === quizData.length) feedbackEl.textContent = "Xuất sắc! Bạn đã trả lời đúng tất cả các câu hỏi.";
            else if (score >= quizData.length / 2) feedbackEl.textContent = "Làm tốt lắm! Hãy tiếp tục phát huy.";
            else feedbackEl.textContent = "Cố gắng hơn ở lần sau nhé!";

            await saveResultToFirestore(currentPlayerName, score, quizData.length, allQuizData[currentQuizSetIndex].name);
            switchQuizView('quiz-results-view');
        }

        async function saveResultToFirestore(name, score, total, setName) {
            try {
                const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
                const leaderboardCollection = collection(db, 'artifacts', appId, 'public', 'data', 'quizLeaderboard');
                await addDoc(leaderboardCollection, {
                    name: name,
                    score: score,
                    totalQuestions: total,
                    quizSet: setName,
                    timestamp: serverTimestamp()
                });
            } catch (error) {
                console.error("Error saving result: ", error);
            }
        }

        function loadLeaderboard() {
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
            const leaderboardCollection = collection(db, 'artifacts', appId, 'public', 'data', 'quizLeaderboard');
            // FIX: Remove the second orderBy clause to prevent index error.
            // The sorting will be done client-side.
            const q = query(leaderboardCollection);

            onSnapshot(q, (querySnapshot) => {
                const leaderboardBody = document.getElementById('leaderboard-body');
                leaderboardBody.innerHTML = '';
                if (querySnapshot.empty) {
                    leaderboardBody.innerHTML = `<tr><td colspan="4" class="text-center text-slate-500 py-4">Chưa có ai làm bài.</td></tr>`;
                    return;
                }
                
                // Fetch all documents and convert to an array for client-side sorting
                const results = [];
                querySnapshot.forEach((doc) => {
                    results.push(doc.data());
                });

                // Sort the results in JavaScript
                results.sort((a, b) => {
                    // Sort by score descending
                    if (b.score !== a.score) {
                        return b.score - a.score;
                    }
                    // If scores are equal, sort by timestamp descending (newest first)
                    // Ensure timestamp exists before comparing
                    if (a.timestamp && b.timestamp) {
                         return b.timestamp.seconds - a.timestamp.seconds;
                    }
                    return 0;
                });

                // Take the top 20 results
                const topResults = results.slice(0, 20);

                let rank = 1;
                topResults.forEach((data) => {
                    const row = `
                        <tr>
                            <td class="text-center">${rank++}</td>
                            <td>${data.name}</td>
                            <td class="text-center">${data.score}/${data.totalQuestions}</td>
                            <td>${data.quizSet}</td>
                        </tr>
                    `;
                    leaderboardBody.innerHTML += row;
                });
            });
        }
        
        // --- FEEDBACK LOGIC ---
        window.submitFeedback = async function() {
            const feedbackInput = document.getElementById('feedback-input');
            const feedbackText = feedbackInput.value.trim();
            if (feedbackText === '') return;

            const submitButton = document.querySelector('#tab-content-feedback button');
            submitButton.disabled = true;

            try {
                const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
                const feedbackCollection = collection(db, 'artifacts', appId, 'public', 'data', 'feedback');
                await addDoc(feedbackCollection, { text: feedbackText, timestamp: serverTimestamp() });

                document.getElementById('feedback-thanks').classList.remove('hidden');
                feedbackInput.value = '';
                setTimeout(() => document.getElementById('feedback-thanks').classList.add('hidden'), 3000);
            } catch (error) {
                console.error("Error adding document: ", error);
            } finally {
                submitButton.disabled = false;
            }
        }

        // --- CALENDAR LOGIC ---
        let currentYear = new Date().getFullYear();
        let notes = {};
        const modal = document.getElementById('note-modal');
        let selectedDate = { year: 0, month: 0, day: 0 };
        
        const monthNames = {
            vi: ["Tháng 1", "Tháng 2", "Tháng 3", "Tháng 4", "Tháng 5", "Tháng 6", "Tháng 7", "Tháng 8", "Tháng 9", "Tháng 10", "Tháng 11", "Tháng 12"],
            jp: ["1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月"]
        };
        const dayNames = {
            vi: ["CN", "T2", "T3", "T4", "T5", "T6", "T7"],
            jp: ["日", "月", "火", "水", "木", "金", "土"]
        };

        async function loadNotesForYear(year) {
            if (!auth.currentUser) {
                console.log("User not authenticated, cannot load notes.");
                return {};
            }
            try {
                const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
                const docRef = doc(db, 'artifacts', appId, 'public', 'data', 'calendarNotes', String(year));
                const docSnap = await getDoc(docRef);
                if (docSnap.exists()) {
                    return docSnap.data();
                }
                return {};
            } catch (error) {
                console.error("Error loading notes:", error);
                return {};
            }
        }
        
        function renderNoteSummary(year) {
            const tbody = document.getElementById('note-summary-body');
            tbody.innerHTML = '';

            const sortedNotes = Object.keys(notes)
                .map(key => ({ key, text: notes[key] }))
                .sort((a, b) => {
                    const [monthA, dayA] = a.key.split('-').map(Number);
                    const [monthB, dayB] = b.key.split('-').map(Number);
                    if (monthA !== monthB) return monthA - monthB;
                    return dayA - dayB;
                });

            if (sortedNotes.length === 0) {
                const noNotesText = currentLang === 'vi' ? 'Không có ghi chú nào trong năm nay.' : 'この年にはノートがありません。';
                tbody.innerHTML = `<tr><td colspan="3" class="text-center text-slate-500 py-4">${noNotesText}</td></tr>`;
                return;
            }

            sortedNotes.forEach((note, index) => {
                const [month, day] = note.key.split('-').map(Number);
                const dateStr = `${String(day).padStart(2, '0')}/${String(month + 1).padStart(2, '0')}/${year}`;
                const row = `
                    <tr>
                        <td class="text-center">${index + 1}</td>
                        <td>${dateStr}</td>
                        <td>${note.text}</td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        window.renderCalendar = async function(year) {
            document.getElementById('current-year').textContent = year;
            const container = document.getElementById('calendar-container');
            if (!container) return;
            container.innerHTML = '<div class="col-span-full flex justify-center"><div class="loader"></div></div>';
            
            notes = await loadNotesForYear(year);
            container.innerHTML = '';

            const today = new Date();
            const isCurrentYear = today.getFullYear() === year;

            for (let month = 0; month < 12; month++) {
                const monthCard = document.createElement('div');
                monthCard.className = 'month-card';

                const firstDayOfMonth = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();

                let daysHtml = `<div class="month-header">${monthNames[currentLang][month]}</div>`;
                daysHtml += '<div class="days-grid">';
                
                dayNames[currentLang].forEach(name => {
                    daysHtml += `<div class="day-name">${name}</div>`;
                });

                for (let i = 0; i < firstDayOfMonth; i++) {
                    daysHtml += '<div class="day-cell empty"></div>';
                }

                for (let day = 1; day <= daysInMonth; day++) {
                    const dateKey = `${month}-${day}`;
                    const dayOfWeek = new Date(year, month, day).getDay();
                    const isToday = isCurrentYear && today.getMonth() === month && today.getDate() === day;
                    
                    let classes = 'day-cell';
                    if (isToday) {
                        classes += ' today';
                    } else if (dayOfWeek === 0 || dayOfWeek === 6) { // 0 is Sunday, 6 is Saturday
                        classes += ' weekend';
                    }

                    if (notes[dateKey]) {
                        classes += ' has-note';
                    }

                    daysHtml += `<div class="${classes}" onclick="openNoteModal(${year}, ${month}, ${day})">${day}</div>`;
                }

                daysHtml += '</div>';
                monthCard.innerHTML = daysHtml;
                container.appendChild(monthCard);
            }
            
            // Render the summary table after rendering the calendar
            renderNoteSummary(year);
        }

        window.changeYear = function(offset) {
            currentYear += offset;
            renderCalendar(currentYear);
        }

        window.jumpToYear = function() {
            const yearInput = document.getElementById('year-input');
            const year = parseInt(yearInput.value);
            if (year && year > 1900 && year < 3000) {
                currentYear = year;
                renderCalendar(currentYear);
            }
        }

        window.openNoteModal = function(year, month, day) {
            selectedDate = { year, month, day };
            const dateKey = `${month}-${day}`;
            document.getElementById('modal-title').textContent = `${day} ${monthNames[currentLang][month]}, ${year}`;
            document.getElementById('note-textarea').value = notes[dateKey] || '';
            modal.classList.add('show');
            document.getElementById('note-textarea').focus();
        }

        window.closeNoteModal = function() {
            modal.classList.remove('show');
        }

        window.saveNote = async function() {
            if (!auth.currentUser) {
                alert("Bạn cần đăng nhập để lưu ghi chú.");
                return;
            }
            const noteText = document.getElementById('note-textarea').value.trim();
            const { year, month, day } = selectedDate;
            const dateKey = `${month}-${day}`;

            if (noteText) {
                notes[dateKey] = noteText;
            } else {
                delete notes[dateKey];
            }

            try {
                const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
                const docRef = doc(db, 'artifacts', appId, 'public', 'data', 'calendarNotes', String(year));
                await setDoc(docRef, notes, { merge: true });
                closeNoteModal();
                renderCalendar(year); // Re-render to show note indicator and update summary table
            } catch (error) {
                console.error("Error saving note:", error);
                alert("Lỗi khi lưu ghi chú.");
            }
        }


        // --- ONLOAD & SCROLL EFFECTS ---
        window.onload = function() {
            initializeAuth().then(() => {
                // Initial render after auth is complete
                switchLanguage('vi');
                populateQuizSets();
                loadLeaderboard();
            });
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.content-section').forEach(section => {
                observer.observe(section);
            });

            const backToTopButton = document.getElementById('back-to-top');
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    backToTopButton.classList.add('show');
                } else {
                    backToTopButton.classList.remove('show');
                }
            });

            backToTopButton.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            
            // Close modal on outside click
            modal.addEventListener('click', (e) => {
                if (e.target.id === 'note-modal') {
                    closeNoteModal();
                }
            });
            
            // Quiz Event Listeners
            document.getElementById('start-quiz-btn').addEventListener('click', () => {
                currentPlayerName = document.getElementById('player-name').value.trim();
                if (!currentPlayerName) {
                    alert('Vui lòng nhập tên của bạn để bắt đầu!');
                    return;
                }
                currentQuizSetIndex = document.getElementById('quiz-set-select').value;
                loadQuiz(currentQuizSetIndex);
                switchQuizView('quiz-container-view');
            });

            document.getElementById('submit-quiz-btn').addEventListener('click', submitQuiz);
            document.getElementById('play-again-btn').addEventListener('click', () => {
                switchQuizView('quiz-setup');
            });
        };
    </script>
</body>
</html>
